language: shell
os: linux
services: docker
dist: bionic

env:
  global:
    IMAGE: quay.io/konveyor/oadp-operator
    DEFAULT_BRANCH: master
    DOCKERFILE: Dockerfile
jobs:
  include:
   - stage: build image
     arch: ppc64le
     script:
     - travis_wait 30 ./.travis-build-image.sh
   - arch: amd64
     script:
     - travis_wait 30 ./.travis-build-image.sh
   - arch: s390x
     script:
     - travis_wait 30 ./.travis-build-image.sh
   - arch: arm64
     script:
     - travis_wait 30 ./.travis-build-image.sh
   - stage: push manifest
     arch: amd64
     script: ./.travis-push-manifest.sh
